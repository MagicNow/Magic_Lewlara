{"version":3,"sources":["post.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"post.js","sourcesContent":["$.Redactor.prototype.underline = function()\r\n{\r\n    return {\r\n        init: function()\r\n        {\r\n            var button = this.button.addAfter('italic', 'underline', 'Underline');\r\n            this.button.addCallback(button, this.underline.format);\r\n        },\r\n        format: function()\r\n        {\r\n            this.inline.format('u');\r\n        }\r\n    };\r\n};\r\n\r\n\r\n //POST \r\n$(document).ready(function () {\r\n\r\n    /*$('textarea.editavel').wysiwyg({ \r\n        autoSave: true,\r\n        rmUnusedControls: true,\r\n        css: baseUrl + '/css/textarea-editavel.css',\r\n        iFrameClass: 'iframe-textarea-editavel',\r\n        autoGrow: true,\r\n        html: \"<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Strict//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd'><html xmlns='http://www.w3.org/1999/xhtml' xml:lang='en' style='margin:0'><head><meta http-equiv='Content-Type' content='text/html; charset=UTF-8'><link rel='stylesheet'  href='\"+baseUrl+\"/libs/lightslider/css/lightslider.css'/></head><body style='margin:0;'>INITIAL_CONTENT \"+scriptss+\" </body></html>\",\r\n        controls: {\r\n            colorpicker: {\r\n                groupIndex: 11,\r\n                visible: true,\r\n                css: {\r\n                    \"color\": function (cssValue, Wysiwyg) {\r\n                        var document = Wysiwyg.innerDocument(),\r\n                            defaultTextareaColor = $(document.body).css(\"color\");\r\n                            console.log(defaultTextareaColor);\r\n                        if (cssValue !== defaultTextareaColor) {\r\n                            return true;\r\n                        }\r\n\r\n                        return false;\r\n                    }\r\n                },\r\n                exec: function() {\r\n                    if ($.wysiwyg.controls.colorpicker) {\r\n                        $.wysiwyg.controls.colorpicker.init(this);\r\n                    }\r\n                },\r\n                tooltip: \"Colorpicker\"\r\n            }\r\n        }\r\n        \r\n    }); */\r\n\r\n\r\n    $('textarea.editavel').redactor({\r\n        buttonSource: true,\r\n        cleanOnPaste: false,\r\n        replaceDivs: false,\r\n        removeDataAttr: false,\r\n        preSpaces: 4,\r\n        allowedTags: ['p', 'h1', 'h2', 'pre', 'div', 'span','ul','li', 'hr','img','a','strong','b','em','i','u','del','br','iframe'],\r\n        allowedAttr:  [\r\n            ['p', 'class'],\r\n            ['span', 'style'],\r\n            ['hr', 'class'],\r\n            ['ul', 'class'],\r\n            ['iframe',['src','style','width','height','allowfullscreen']],\r\n            ['li', 'data-thumb'],\r\n            ['div', ['unselectable','style','contenteditable','class','contenteditable']],\r\n            ['img', ['src','style','rel','width','height']]\r\n        ],\r\n        buttonsHide: ['unorderedlist', 'orderedlist', 'outdent', 'indent'],\r\n        plugins: ['underline', 'video', 'fontsize', 'fontcolor'],\r\n        imageEditable: true,\r\n        imageLink: true,\r\n        imagePosition: true\r\n    });\r\n\r\n    $(\".bg-textarea-editavel-toolbar.bt-bold\").mousedown(function (e) {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        $('.re-bold').trigger('click');\r\n    });\r\n    $(\".bg-textarea-editavel-toolbar.bt-italic\").mousedown(function (e) {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        $('.re-italic').trigger('click');\r\n    });\r\n    $(\".bg-textarea-editavel-toolbar.bt-underline\").mousedown(function (e) {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        $('.re-underline').trigger('click');\r\n    });\r\n    $(\".bg-textarea-editavel-toolbar.bt-strikeThrough\").mousedown(function (e) {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        $('.re-deleted').trigger('click');\r\n    });\r\n    $(\".bg-textarea-editavel-toolbar.bt-justifyLeft\").mousedown(function (e) {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        $('.re-alignment').trigger('click');\r\n        $('.redactor-dropdown-left').trigger('click');\r\n    });\r\n    $(\".bg-textarea-editavel-toolbar.bt-justifyCenter\").mousedown(function (e) {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        $('.re-alignment').trigger('click');\r\n        $('.redactor-dropdown-center').trigger('click');\r\n    });\r\n    $(\".bg-textarea-editavel-toolbar.bt-justifyRight\").mousedown(function (e) {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        $('.re-alignment').trigger('click');\r\n        $('.redactor-dropdown-right').trigger('click');\r\n    }); \r\n    $(\".bt-fontSize\").on('change', function (e) {       \r\n        $('.re-fontsize').trigger('click');\r\n        $('.redactor-dropdown-'+$(this).val()).trigger('click');   \r\n        $(this).val('');     \r\n    }); \r\n    $(\".bt-fontColor\").mousedown(function (e) {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        $('.re-fontcolor').trigger('click');\r\n        $('.redactor-dropdown-box-fontcolor').detach().appendTo('.toolbar-to-drop');\r\n        $('.redactor-dropdown-box-fontcolor').css({\r\n          \"top\": \"60px\",\r\n          \"left\": \"0\"\r\n        });\r\n    }); \r\n\r\n    $(\".bt-fontColor\").click(function (e) {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n    }); \r\n\r\n\r\n    \r\n    /*$(\".bg-textarea-editavel-toolbar.bt-fontIncrease\").mousedown(function (e) {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        $('.re-bold').trigger('click');\r\n    });\r\n    $(\".bg-textarea-editavel-toolbar.bt-fontDecrease\").mousedown(function (e) {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        $('.re-bold').trigger('click');\r\n    });*/\r\n/*    $(\".bg-textarea-editavel-toolbar.bt-colorPicker\").click(function () {\r\n        $(\"textarea.editavel\").wysiwyg(\"triggerControl\", \"colorpicker\");\r\n    });*/\r\n\r\n\r\n    // CATEGORIA E SUBCATEGORIA\r\n\r\n    $('#btn-adicionar-categoria').on('click', function(e){\r\n        e.preventDefault();\r\n\r\n        var categoria_options_arr = [];\r\n        var obj = categorias_select;\r\n\r\n        for (var key in obj) {\r\n            if (obj.hasOwnProperty(key)) {\r\n                categoria_options_arr[key] = obj[key];\r\n            }\r\n        }\r\n        categoria_options = '';\r\n        $.each(categoria_options_arr, function (i, item) {\r\n            if(typeof(item) != 'undefined'){\r\n                categoria_options +=  \"<option value='\"+i+\"'>\"+item+\"</option>\";\r\n            }\r\n        });\r\n\r\n\r\n        var html = \"<div class='categoria-grupo'>\"+\r\n                        \"<br>\"+\r\n                        \"<a class='btn btn-cinza btn-extra-pequeno align-center float-right mb-10 btn-remover-categoria'>REMOVER</a>\"+\r\n                        \"<br>\"+\r\n                        \"<select class='form-control arrow-preto-amarelo onChangeAlteraSubcategoria' name='categoria_id[]'><option value='' selected>Selecione a Categoria</option>\"+categoria_options+\"</select>\"+\r\n                        \"<br>\"+\r\n                        \"<select class='form-control arrow-preto-amarelo selectSubcategorias hide' name='subcategoria_id[]'><option value='' selected>Selecione a Categoria</option></select>\"+\r\n                        \"<br>\"+\r\n                    \"</div><!-- /.categoria-grupo -->\";\r\n\r\n        $( html ).insertBefore(\"#categoria-grupo-bt\");\r\n    });\r\n\r\n    $('body').on('click', '.btn-remover-categoria', function(e){\r\n        e.preventDefault();\r\n\r\n        $(this).parent().remove();\r\n    });\r\n\r\n    $('body').on('change','.onChangeAlteraSubcategoria', function (e) {\r\n        // desabilita o botão de submit\r\n        $('input[type=\"submit\"]').attr('disabled', 'disabled');\r\n        tthis = $(this);\r\n        var categoria_id = $(this).val();\r\n        e.preventDefault();\r\n\r\n        $.ajax({\r\n            type: \"POST\",\r\n            dataType: \"json\",\r\n            url: baseUrl + \"/post/ajaxSubcategoria\",\r\n            data: {'categoria_id': categoria_id},\r\n            success: function (data) {\r\n                if(data == '') {\r\n                    var selectSubcategorias = tthis.parent().find('.selectSubcategorias');\r\n                    selectSubcategorias.empty()\r\n                    selectSubcategorias.append(\"<option value=''></option>\");\r\n                    selectSubcategorias.addClass('hide');\r\n                    $('input[type=\"submit\"]').removeAttr('disabled');\r\n                    return true;\r\n                }\r\n                // popula o select com as subcategorias retornadas\r\n                var selectSubcategorias = tthis.parent().find('.selectSubcategorias');\r\n                selectSubcategorias.removeClass('hide');\r\n                var listitems = '';\r\n                listitems += '<option value=\"\">Selecione a subcategoria</option>';\r\n                $.each(data, function (key, value) {\r\n                    listitems += '<option value=' + key + '>' + value + '</option>';\r\n                });\r\n                selectSubcategorias.empty();//.find('option').remove();  \r\n                selectSubcategorias.append(listitems);\r\n\r\n                // se houver valor submetido no form que retornou de erro, define ele\r\n                if (typeof (old_subcategoria_id) != 'undefined') {\r\n                    if (old_subcategoria_id > 0) {\r\n                        // verifica se existe o id nos options, se sim, seleciona\r\n                        selectSubcategorias.find('option').each(function () {\r\n                            if (this.value == old_subcategoria_id) {\r\n                                selectSubcategorias.val(old_subcategoria_id);\r\n                                return false;\r\n                            }\r\n                        });\r\n                    }\r\n                }\r\n\r\n                // habilita o botÃ£o de submit\r\n                $('input[type=\"submit\"]').removeAttr('disabled');\r\n            }\r\n        });\r\n    })\r\n\r\n\r\n    // se houver valor submetido no form que retornou de erro repopula o select de subcategoria\r\n    if (typeof (old_subcategoria_id) != 'undefined') {\r\n        if (old_subcategoria_id > 0 || old_subcategoria_id == null) {\r\n            $('#onChangeAlteraSubcategoria').trigger('change');\r\n        }\r\n    }\r\n\r\n    $('#btn-editar').on('click', function (e) {\r\n        $(this).hide();\r\n        $('#publicar-texto').html('PUBLICAR EM');\r\n        $('#publicar-em-obrigatorio').val('1');\r\n        $(this).parent().find('.div-publicar-em-child').slideDown();\r\n    });\r\n\r\n\r\n    // MODAL MODAIS MODALS\r\n    // MODAL MODAIS MODALS\r\n    // MODAL MODAIS MODALS\r\n\r\n    // GERAL\r\n\r\n    $('#modal-midias').on('click', '.limpaselect ', function (e) {\r\n        $('.selected-frame:not(.hide)').addClass('hide');\r\n        var nselect = $('.selected-frame:not(.hide)').length;\r\n        $('.libraryselected').html(nselect);\r\n    });\r\n    \r\n\r\n    Dropzone.autoDiscover = false;\r\n\r\n    // INSERIR INSERT MIDIAS\r\n    // CRIAR GALERIA LIBRARY 1\r\n    // CRIAR GALERIA LIBRARY 1\r\n    // CRIAR GALERIA LIBRARY 1\r\n    // CRIAR GALERIA LIBRARY 1\r\n    // CRIAR GALERIA LIBRARY 1\r\n    // CRIAR GALERIA LIBRARY 1\r\n    // CRIAR GALERIA LIBRARY 1\r\n    // CRIAR GALERIA LIBRARY 1\r\n    //===========================================================================================================================\r\n\r\n\t$(\"#insertUploadDropzone\").dropzone({\r\n        url: $('#insertUploadDropzone').attr('action'),\r\n        paramName: \"image\",\r\n        clickable: '#insertUploadDropzone .dropzone-clickable',\r\n        acceptedFiles: 'image/*',\r\n        previewTemplate: '<div style=\"display:none\"></div>',\r\n        init: function () {\r\n            this.on(\"success\", function (file, retorno) {\r\n                retorno = jQuery.parseJSON(retorno);\r\n\r\n                $('#upload1 .percentage').hide();\r\n\r\n                // se houve erro\r\n                if (retorno.error == null) {\r\n                    $('#library-tab1').trigger('click');\r\n                } else {\r\n                    $('#upload1 .error').text(retorno.error).show();\r\n                    return false;\r\n                }\r\n            });\r\n            this.on('uploadprogress', function (file, percentage, bytesSent) {\r\n                $('#upload1 .error').hide();\r\n                $('#upload1 .percentage').show().text(Math.round(percentage) + '%');\r\n            });\r\n        }\r\n    });\r\n\t\r\n\r\n\t$('#library-tab1').on('click', function(e){ \r\n\t\te.preventDefault();\r\n\t\tvar cliente_id = $('#modal_cliente_id').val();\r\n\t\t$.ajax({\r\n\t\t\ttype: \"POST\",\r\n\t\t\tdataType: \"html\",\r\n\t\t\turl : baseUrl+\"/post/ajax_insertLibrary\",\r\n\t\t\tdata : { 'cliente_id': cliente_id },\r\n\t\t\tsuccess : function(data){\t\r\n\t\t\t\t\t$('#library1').html(data);\r\n\r\n\t\t\t\t\t// jscroll na galeria\r\n\t\t\t\t\tvar thiss = $('#library-tab1');\r\n\t\t\t\t\tvar id = thiss.attr('href');\r\n\t\t\t\t\tvar info = $(id).find('.gallery_info');\r\n\t\t\t\t\tvar scroll = $(id).find('.gallery_scroll');\r\n\t\t\t\t\tvar h = info.height();\r\n\t\t\t\t\tscroll.css('height', h);\r\n\t\t\t\t\tscroll.jScrollPane({showArrows: true,});\r\n\t\t\t\t\tscroll.css('width','');\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar w = $('#library1 .jspContainer').width() - 1;\r\n\t\t\t\t\t$('#library1 .jspContainer').css('width',w); \r\n\t\t\t\t\t// fim jscroll na galeria\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n\r\n    $('#modal-midias').on('click', '#library1 .lista-cada-imagem', function (e) {\r\n        $('.limpaselect').trigger('click');\r\n\r\n        $(this).parent().children('.selected-frame').toggleClass('hide');\r\n        var nselect = $('#library1 .selected-frame:not(.hide)').length;\r\n        $('#library1 .libraryselected').html(nselect);\r\n\r\n            var imgUrl = $(this).data('imageurl');\r\n            var imgDetail = $('#library1 img.detail');\r\n            imgDetail.attr('src', imgUrl);\r\n            var detailName = imgDetail.attr('src').split('/');\r\n            var detailName = detailName[detailName.length - 1];\r\n            var detailSize = $(this).data('filesize');\r\n            var detailTime = $(this).data('data');\r\n            var detailWidth = imgDetail.get(0).naturalWidth;\r\n            var detailHeight = imgDetail.get(0).naturalHeight;\r\n\r\n            $('#library1 .detailName').text('- ' + detailName);\r\n            $('#library1 .detailSize').text('- ' + detailSize);\r\n            $('#library1 .detailTime').text('- ' + detailTime);\r\n            $('#library1 .detailWidth').text(detailWidth);\r\n            $('#library1 .detailHeight').text(detailHeight);\r\n            $('#library1 input[name=\"url_imagem\"]').val(imgUrl);\r\n            $('#library1 .library_url_espec').val(imgUrl);            \r\n\r\n    });\r\n\r\n    $('#modal-midias').on('click','#library1 a.inserir', function(e){\r\n        var url_imagem = $('#library1 .library_url_imagem').val();\r\n        if(!url_imagem){\r\n            alert('Selecione uma imagem.');\r\n            return false;\r\n        }\r\n\r\n        var titulo = $('#library1 .library_titulo').val();\r\n        var descricao = $('#library1 .library_img_desc').val();\r\n        //var alinhamento = $('#library1 .library_alignment').val();\r\n        var alinhamento = '';\r\n        var linkar_para = $('#library1 .library_url_espec').val();\r\n\r\n        htmlInserir = \"<a href='\"+linkar_para+\"' class='\"+alinhamento+\"' style='max-width: 100%;' ><img src='\"+url_imagem+\"' title='\"+titulo+\"' alt='\"+descricao+\"' style='max-width: 100%;' ></a> &nbsp; \"; \r\n\r\n        $('textarea.editavel').redactor('selection.restore');\r\n        $('textarea.editavel').redactor('insert.html',htmlInserir, false);\r\n\r\n        $('#modal-midias').toggleClass('hide');\r\n    });\r\n\r\n   \r\n    \r\n    // CRIAR GALERIA LIBRARY 2\r\n    // CRIAR GALERIA LIBRARY 2\r\n    // CRIAR GALERIA LIBRARY 2\r\n    // CRIAR GALERIA LIBRARY 2\r\n    // CRIAR GALERIA LIBRARY 2\r\n    // CRIAR GALERIA LIBRARY 2\r\n    // CRIAR GALERIA LIBRARY 2\r\n    // CRIAR GALERIA LIBRARY 2\r\n    //===========================================================================================================================\r\n    $(\"#createUploadDropzone\").dropzone({\r\n        url: $('#createUploadDropzone').attr('action'),\r\n        paramName: \"image\",\r\n        clickable: '#createUploadDropzone .dropzone-clickable',\r\n        acceptedFiles: 'image/*',\r\n        previewTemplate: '<div style=\"display:none\"></div>',\r\n        init: function () {\r\n            this.on(\"success\", function (file, retorno) {\r\n                retorno = jQuery.parseJSON(retorno);\r\n\r\n                $('#upload2 .percentage').hide();\r\n\r\n                // se houve erro\r\n                if (retorno.error == null) {\r\n                    $('#library-tab2').trigger('click');\r\n                } else {\r\n                    $('#upload2 .error').text(retorno.error).show();\r\n                    return false;\r\n                }\r\n            });\r\n            this.on('uploadprogress', function (file, percentage, bytesSent) {\r\n                $('#upload2 .error').hide();\r\n                $('#upload2 .percentage').show().text(Math.round(percentage) + '%');\r\n            });\r\n        }\r\n    });\r\n\r\n    $('#library-tab2').on('click', function (e) {\r\n        //e.preventDefault();\r\n        $('.limpaselect').trigger('click');\r\n        var cliente_id = $('#modal_cliente_id').val();\r\n        $.ajax({\r\n            type: \"POST\",\r\n            dataType: \"html\",\r\n            url: baseUrl + \"/post/ajax_createLibrary\",\r\n            data: {'cliente_id': cliente_id},\r\n            success: function (data) {\r\n                $('#library2').html(data);\r\n\r\n                // jscroll na galeria\r\n                var thiss = $('#library-tab2');\r\n                var id = thiss.attr('href');\r\n                var info = $(id).find('.gallery_info');\r\n                var scroll = $(id).find('.gallery_scroll');\r\n                var h = info.height();\r\n                scroll.css('height', h);\r\n                scroll.jScrollPane({showArrows: true, });\r\n                scroll.css('width', '');\r\n\r\n                var w = $('#library2 .jspContainer').width() - 1;\r\n                $('#library2 .jspContainer').css('width', w);\r\n                // fim jscroll na galeria\r\n            }\r\n        });\r\n    });\r\n\r\n    $('#modal-midias').on('click', '#criar_galeria', function (e) {\r\n\r\n        var totalImagens = $('#library2 .selected-frame:not(.hide)').length;\r\n        if(!(totalImagens > 1)) {\r\n            alert('Selecione no mínimo duas Imagens.');\r\n            return false;\r\n        }\r\n\r\n        var date = Date.now();\r\n        var images='', isso;\r\n\r\n        var galeria = '<br ><br>\\\r\n                    <hr class=\"galeria-separador galeria-separador-top\"><div style=\"display:none!important\" contenteditable=\"false\" unselectable=\"true\">InicioDeGaleria</div> <div class=\"post-galeria-posicao\" contenteditable=\"false\" unselectable=\"true\"> <ul class=\"post-galeria\">';\r\n\r\n                        $('#library2 .selected-frame:not(.hide)').each(function () {\r\n                            isso = $(this).parent().children('.lista-cada-imagem');\r\n                            //images += \"<img rel='\" + date + \"' src='\" + isso.data('imageurl') + \"'>\";\r\n\r\n                            galeria += '<li data-thumb=\"' + isso.data('imageurl') + '\">\\\r\n                                            <img src=\"' + isso.data('imageurl') + '\" />\\\r\n                                        </li>';\r\n                        });\r\n\r\n            galeria += '</ul>\\\r\n                    </div><div style=\"display:none!important\" contenteditable=\"false\" unselectable=\"true\">FimDeGaleria</div>\\\r\n                    <hr class=\"galeria-separador galeria-separador-bottom\">';\r\n\r\n        //$('textarea.editavel').wysiwyg('focus').wysiwyg('insertHtml', galeria);\r\n        $('textarea.editavel').redactor('selection.restore');\r\n        $('textarea.editavel').redactor('insert.html',galeria, false);\r\n\r\n        $('#modal-midias').toggleClass('hide');\r\n    });\r\n\r\n    $('#modal-midias').on('click', '#library2 .lista-cada-imagem,#library2 .selected-frame', function (e) {\r\n        \r\n        \r\n        $(this).parent().children('.selected-frame').toggleClass('hide');\r\n        var nselect = $('#library2 .selected-frame:not(.hide)').length;\r\n        $('#library2 .libraryselected').html(nselect);\r\n\r\n\r\n        if(!$(this).parent().children('.selected-frame').hasClass('hide')){\r\n            var imgUrl = $(this).data('imageurl');\r\n            var imgDetail = $('#library2 img.detail');\r\n            imgDetail.attr('src', imgUrl);\r\n            var detailName = imgDetail.attr('src').split('/');\r\n            var detailName = detailName[detailName.length - 1];\r\n            var detailSize = $(this).data('filesize');\r\n            var detailTime = $(this).data('data');\r\n            var detailWidth = imgDetail.get(0).naturalWidth;\r\n            var detailHeight = imgDetail.get(0).naturalHeight;\r\n\r\n            $('#library2 .detailName').text('- ' + detailName);\r\n            $('#library2 .detailSize').text('- ' + detailSize);\r\n            $('#library2 .detailTime').text('- ' + detailTime);\r\n            $('#library2 .detailWidth').text(detailWidth);\r\n            $('#library2 .detailHeight').text(detailHeight);\r\n            $('#library2 input[name=\"url_imagem\"]').val(imgUrl);\r\n        }\r\n    });\r\n\r\n    //END CRIAR GALERIA LIBRARY 2\r\n    //END CRIAR GALERIA LIBRARY 2\r\n    //END CRIAR GALERIA LIBRARY 2\r\n    //END CRIAR GALERIA LIBRARY 2\r\n    //END CRIAR GALERIA LIBRARY 2\r\n    //END CRIAR GALERIA LIBRARY 2\r\n    //END CRIAR GALERIA LIBRARY 2\r\n\r\n\r\n\r\n    // DEFINE GALERIA LIBRARY 3\r\n    // DEFINE GALERIA LIBRARY 3\r\n    // DEFINE GALERIA LIBRARY 3\r\n    // DEFINE GALERIA LIBRARY 3\r\n    // DEFINE GALERIA LIBRARY 3\r\n    // DEFINE GALERIA LIBRARY 3\r\n    // DEFINE GALERIA LIBRARY 3\r\n    // DEFINE GALERIA LIBRARY 3\r\n    //===========================================================================================================================\r\n    $(\"#defineUploadDropzone\").dropzone({\r\n        url: $('#defineUploadDropzone').attr('action'),\r\n        paramName: \"image\",\r\n        clickable: '#defineUploadDropzone .dropzone-clickable',\r\n        acceptedFiles: 'image/*',\r\n        previewTemplate: '<div style=\"display:none\"></div>',\r\n        init: function () {\r\n            this.on(\"success\", function (file, retorno) {\r\n                retorno = jQuery.parseJSON(retorno);\r\n\r\n                $('#upload3 .percentage').hide();\r\n\r\n                // se houve erro\r\n                if (retorno.error == null) {\r\n                    $('#library-tab3').trigger('click');\r\n                } else {\r\n                    $('#upload3 .error').text(retorno.error).show();\r\n                    return false;\r\n                }\r\n            });\r\n            this.on('uploadprogress', function (file, percentage, bytesSent) {\r\n                $('#upload3 .error').hide();\r\n                $('#upload3 .percentage').show().text(Math.round(percentage) + '%');\r\n            });\r\n        }\r\n    });\r\n\r\n    $('#library-tab3').on('click', function (e) {\r\n        //e.preventDefault();\r\n        $('.limpaselect').trigger('click');\r\n        var cliente_id = $('#modal_cliente_id').val();\r\n        $.ajax({\r\n            type: \"POST\",\r\n            dataType: \"html\",\r\n            url: baseUrl + \"/post/ajax_defineLibrary\",\r\n            data: {'cliente_id': cliente_id},\r\n            success: function (data) {\r\n                $('#library3').html(data);\r\n\r\n                // jscroll na galeria\r\n                var thiss = $('#library-tab3');\r\n                var id = thiss.attr('href');\r\n                var info = $(id).find('.gallery_info');\r\n                var scroll = $(id).find('.gallery_scroll');\r\n                var h = info.height();\r\n                scroll.css('height', h);\r\n                scroll.jScrollPane({showArrows: true, });\r\n                scroll.css('width', '');\r\n\r\n                var w = $('#library3 .jspContainer').width() - 1;\r\n                $('#library3 .jspContainer').css('width', w);\r\n                // fim jscroll na galeria\r\n            }\r\n        });\r\n    });\r\n\r\n    $('#modal-midias').on('click', '#library3 .lista-cada-imagem,#library3 .selected-frame', function (e) {\r\n        $('.limpaselect').trigger('click');\r\n        \r\n        $(this).parent().children('.selected-frame').toggleClass('hide');\r\n        var nselect = $('#library3 .selected-frame:not(.hide)').length;\r\n        $('#library3 .libraryselected').html(nselect);\r\n\r\n\r\n        if(!$(this).parent().children('.selected-frame').hasClass('hide')){\r\n            var imgUrl = $(this).data('imageurl');\r\n            var imgUri = $(this).data('imageuri');\r\n            var imgDetail = $('#library3 img.detail');\r\n            imgDetail.attr('src', imgUrl);\r\n            var detailName = imgDetail.attr('src').split('/');\r\n            var detailName = detailName[detailName.length - 1];\r\n            var detailSize = $(this).data('filesize');\r\n            var detailTime = $(this).data('data');\r\n            var detailWidth = imgDetail.get(0).naturalWidth;\r\n            var detailHeight = imgDetail.get(0).naturalHeight;\r\n\r\n\r\n            $('#library3 .detailName').text('- ' + detailName);\r\n            $('#library3 .detailSize').text('- ' + detailSize);\r\n            $('#library3 .detailTime').text('- ' + detailTime);\r\n            $('#library3 .detailWidth').text(detailWidth);\r\n            $('#library3 .detailHeight').text(detailHeight);\r\n            $('#library3 input[name=\"url_imagem\"]').val(imgUrl);\r\n            $('#library3 input[name=\"uri_imagem\"]').val(imgUri);\r\n        }\r\n    });\r\n\r\n    $('#modal-midias').on('click', '#definir_destaque_library3', function (e) {\r\n        var url_imagem = $('#library3 .library_url_imagem').val();\r\n        if(!url_imagem){\r\n            alert('Selecione uma imagem.');\r\n            return false;\r\n        }\r\n\r\n        var uri_imagem = $('#library3 .library_uri_imagem').val();\r\n\r\n        var titulo = $('#library3 .library_titulo').val();\r\n        var descricao = $('#library3 .library_img_desc').val();\r\n\r\n        document.querySelector('input[name=\"definir_destaque_flag_if_from_url\"]').value = '0';\r\n\r\n        document.querySelector('input[name=\"definir_destaque_url\"]').value = '';\r\n        document.querySelector('input[name=\"definir_destaque_imagem\"]').value = uri_imagem;\r\n        document.querySelector('input[name=\"definir_destaque_title\"]').value = titulo;\r\n        document.querySelector('input[name=\"definir_destaque_desc\"]').value = descricao;        \r\n        document.querySelector('input[name=\"definir_destaque_linkar_para\"]').value = '';\r\n        document.querySelector('input[name=\"definir_destaque_alignment\"]').value = '';\r\n\r\n        document.querySelector('.imagem-destaque').src = baseUrl+'/'+uri_imagem;\r\n\r\n        $('#modal-midias').toggleClass('hide');\r\n    });\r\n\r\n    //END DEFINE GALERIA LIBRARY 3\r\n    //END DEFINE GALERIA LIBRARY 3\r\n    //END DEFINE GALERIA LIBRARY 3\r\n    //END DEFINE GALERIA LIBRARY 3\r\n    //END DEFINE GALERIA LIBRARY 3\r\n    //END DEFINE GALERIA LIBRARY 3\r\n    //END DEFINE GALERIA LIBRARY 3\r\n    \r\n\r\n\r\n\r\n    // CARREGAR GALERIA AUTOMATICAMENTE AO ADICIONAR NO POST\r\n    var lightSliderInstance = new Array();\r\n    setInterval(function(){ \r\n        if($('.post-galeria').not('.lightSlider').length > 0){ \r\n            $.each($('.post-galeria').not('.lightSlider'), function(e){\r\n                var temp = $(this).lightSlider({ gallery: true, adaptiveHeight: false, item: 1, loop:true, auto:false, slideMargin: 0, thumbItem: 5 }); \r\n                lightSliderInstance.push(temp);\r\n            });\r\n        } \r\n    }, 500);\r\n\r\n    $(\".redactor-box\").keyup(function(event) {\r\n        if (event.keyCode == 8 || event.keyCode == 46) {\r\n            var xx;\r\n            for (xx = 0; xx < lightSliderInstance.length; xx++) {\r\n                lightSliderInstance[xx].refresh();\r\n            }\r\n        }\r\n    });\r\n    \r\n});\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nwindow.addEventListener(\"dragover\", function (e) {\r\n    e = e || event;\r\n    e.preventDefault();\r\n}, false);\r\nwindow.addEventListener(\"drop\", function (e) {\r\n    e = e || event;\r\n    e.preventDefault();\r\n}, false);\r\n\r\n\r\n$('a[data-toggle=\"tab\"]').on('shown.bs.tab', function (e) {\r\n    var id = $(this).attr('href');\r\n    var info = $(id).find('.gallery_info');\r\n    var scroll = $(id).find('.gallery_scroll');\r\n    var h = info.height();\r\n    scroll.css('height', h);\r\n    scroll.jScrollPane({showArrows: true, });\r\n    scroll.css('width', '');\r\n\r\n    var w = $('.jspContainer').width() - 1;\r\n    $('.jspContainer').css('width', w);\r\n});\r\n\r\n$('.bt-adicionar-midias, #close-media-modal').on('mousedown', function (e) {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    $('textarea.editavel').redactor('selection.save');\r\n\r\n    $('#modal-midias').toggleClass('hide');\r\n    $('#insert-tab').trigger('click');\r\n    $('#upload-tab1').trigger('click');\r\n});\r\n\r\n$('.bt-album-fotos').on('mousedown', function (e) {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    $('textarea.editavel').redactor('selection.save');\r\n\r\n    $('#modal-midias').toggleClass('hide');\r\n    $('#create-tab').trigger('click');\r\n    $('#upload-tab2').trigger('click');\r\n});\r\n\r\n$('#define-destaque').on('mousedown', function (e) {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    $('textarea.editavel').redactor('selection.save');\r\n\r\n    $('#modal-midias').toggleClass('hide');\r\n    $('#define-tab').trigger('click');\r\n    $('#upload-tab').trigger('click');\r\n});\r\n\r\nvar redefinir_destaque_first = 1;\r\n\r\n$('#definir_destaque_url_').on('blur', function () {\r\n    var src = $('#definir_destaque_url_').val();\r\n    $('#add img').attr('src', src);\r\n\r\n    if (src && redefinir_destaque_first == 1) {\r\n        $('#add-img-via-url-submit').toggleClass('btn-inactive');\r\n        $('#add-img-via-url-submit').toggleClass('btn-amarelo');\r\n        $('.add > div:nth-of-type(3), .add > div:nth-of-type(4), .add > div:nth-of-type(5)').toggleClass('post-modal-visibility-hidden');\r\n        redefinir_destaque_first = 0;\r\n    }\r\n\r\n    document.querySelector('#add #definir_destaque_linkar_para_').value=src;\r\n});\r\n\r\n$('#add-img-via-url-submit').on('click', function () {\r\n    document.querySelector('input[name=\"definir_destaque_flag_if_from_url\"]').value = '1';\r\n\r\n    document.querySelector('input[name=\"definir_destaque_url\"]').value = document.querySelector('.add #definir_destaque_url_').value;\r\n    document.querySelector('input[name=\"definir_destaque_imagem\"]').value = '';\r\n    document.querySelector('input[name=\"definir_destaque_title\"]').value = document.querySelector('.add #definir_destaque_title_').value;\r\n    document.querySelector('input[name=\"definir_destaque_linkar_para\"]').value = document.querySelector('.add #definir_destaque_linkar_para_').value;\r\n    document.querySelector('input[name=\"definir_destaque_alignment\"]').value = document.querySelector('.add #definir_destaque_alignment_').value;\r\n\r\n    document.querySelector('.imagem-destaque').src = document.querySelector('.add #definir_destaque_url_').value;\r\n\r\n    $('#modal-midias').toggleClass('hide');\r\n    //$('.add input, .add select').clone().appendTo('.main.post > form').css('display', 'none');\r\n});\r\n\r\n\r\n$('#add-img-via-url-to-library-submit').on('click', function () {\r\n\r\n    var cliente_id = $('#modal_cliente_id').val();\r\n    \r\n    var data = {\r\n            'cliente_id': cliente_id,\r\n            'definir_destaque_url' : document.querySelector('.add #definir_destaque_url_').value,\r\n            'definir_destaque_title' : document.querySelector('.add #definir_destaque_title_').value,   \r\n            'definir_destaque_linkar_para' : document.querySelector('.add #definir_destaque_linkar_para_').value,\r\n            'definir_destaque_alignment' : document.querySelector('.add #definir_destaque_alignment_').value\r\n    };\r\n\r\n    $.ajax({\r\n        type: \"POST\",\r\n        dataType: \"html\",\r\n        url : baseUrl+\"/post/ajax_upload_viaurl\",\r\n        data : data,\r\n        success : function(data){   \r\n            //console.log(data);\r\n            // carregando\r\n            $('#insert-tab').trigger('click');\r\n            $('#library-tab1').trigger('click');\r\n        }\r\n    });\r\n\r\n    \r\n});\r\n\r\n\r\n\r\n\r\n\r\n/*$( window ).load(function() { // ao carregar a página por completo\r\n  $(document).trigger('textareaGrow'); // verifica tamanho altura do textarea \r\n});*/\r\n\r\n\r\n/*setInterval(function(){\r\n    $(document).trigger('textareaGrow');\r\n},500);*/\r\n\r\n   \r\n    \r\n"],"sourceRoot":"/source/"}